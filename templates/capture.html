<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webcam Capture</title>
    <script type="text/javascript" src="https://unpkg.com/webcam-easy@1.1.1/dist/webcam-easy.min.js"></script>
    <link rel="stylesheet" href="../static/style(a).css">
</head>
<body id="capture">
  <div class="webcam-container">
    <!-- Filters Section -->
    <section class="filters">
      <div class="container">
        <div class="filter-panel">
          <div class="panel-header">
            <div class="title-container">
              <h2 class="title">Choose a Filter</h2>
            </div>
            <p class="subtitle">Transform your photo with amazing effects</p>
          </div>
          
          <div class="filter-grid">
            <button class="filter-button active" data-filter="original" onclick="setFilter('none')">
              <div class="filter-icon">‚òÄÔ∏è</div>
              <span class="filter-label">Original</span>
            </button>

            <button class="filter-button" data-filter="bw" onclick="setFilter('grayscale(100%)')">
              <div class="filter-icon">‚ö´</div>
              <span class="filter-label">B&W</span>
            </button>

            <button class="filter-button" data-filter="sepia" onclick="setFilter('sepia(100%)')">
              <div class="filter-icon">üü§</div>
              <span class="filter-label">Sepia</span>
            </button>

            <button class="filter-button" data-filter="vintage" onclick="setFilter('sepia(0.8) contrast(1.1) brightness(1.05) saturate(0.7) hue-rotate(-5deg)')">
              <div class="filter-icon">üì∑</div>
              <span class="filter-label">Vintage</span>
            </button>

            <button class="filter-button" data-filter="contrast" onclick="setFilter('contrast(1.4) saturate(1.3) hue-rotate(-10deg) brightness(1.1) blur(0.5px)')">
              <div class="filter-icon">‚ö°</div>
              <span class="filter-label">Contrast</span>
            </button>

            <button class="filter-button" data-filter="retro" onclick="setFilter('sepia(0.5) contrast(1.2) saturate(1.5) brightness(1.1) hue-rotate(15deg)')">
              <div class="filter-icon">üåà</div>
              <span class="filter-label">Retro</span>
            </button>
          </div>
          
          <div class="active-filter">
            <span class="active-label">Active Filter:</span>
            <div class="active-filter-info">
              <span class="active-icon">‚òÄÔ∏è</span>
              <span class="active-name">Original</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Background decorative element -->
    <section class="bg"></section>
    
    <!-- Webcam Capture Section -->
    <section class="camcapture">
      <video id="webcam" autoplay playsinline></video>
      <button class="capture-btn" onclick="clickPic()" id="captureBtn"> 
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#EC68A6"><path d="M480-260q75 0 127.5-52.5T660-440q0-75-52.5-127.5T480-620q-75 0-127.5 52.5T300-440q0 75 52.5 127.5T480-260Zm0-80q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM160-120q-33 0-56.5-23.5T80-200v-480q0-33 23.5-56.5T160-760h126l74-80h240l74 80h126q33 0 56.5 23.5T880-680v480q0 33-23.5 56.5T800-120H160Zm0-80h640v-480H638l-73-80H395l-73 80H160v480Zm320-240Z"/></svg>
        <span id="captureText">Capture Photo</span>
      </button>
    </section>
    
    <!-- Gallery Section -->
    <section class="gallery-section">
      <div class="gallery-container">
        <h3 class="gallery-title">Captured Photos</h3>
        <div class="gallery-grid" id="galleryGrid">
          <div class="gallery-placeholder">
            <div class="placeholder-icon">üì∑</div>
            <p>Photos will appear here</p>
          </div>
        </div>
        <button class="done-btn" onclick="finishSession()">
          <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="white">
            <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/>
          </svg>
          Done
        </button>
      </div>
    </section>
  </div>
  <canvas id="canvas"></canvas>
  
  <script src="../static/js/script.js"></script>
  <script>
    // Add filter button click handler
    document.addEventListener('DOMContentLoaded', function() {
      const filterButtons = document.querySelectorAll('.filter-button');
      const activeIcon = document.querySelector('.active-icon');
      const activeName = document.querySelector('.active-name');
      
      filterButtons.forEach(button => {
        button.addEventListener('click', function() {
          // Remove active class from all buttons
          filterButtons.forEach(btn => btn.classList.remove('active'));
          
          // Add active class to clicked button
          this.classList.add('active');
          
          // Update active filter display
          const icon = this.querySelector('.filter-icon').textContent;
          const label = this.querySelector('.filter-label').textContent;
          
          activeIcon.textContent = icon;
          activeName.textContent = label;
        });
      });
    });
  </script>
</body>
</html>